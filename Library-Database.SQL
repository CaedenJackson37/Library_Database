--Author Caeden Jackson
--04/10/25

DROP TABLE publisher CASCADE CONSTRAINTS;
DROP TABLE book CASCADE CONSTRAINTS;
DROP TABLE author CASCADE CONSTRAINTS;
DROP TABLE categories CASCADE CONSTRAINTS;
DROP TABLE reviews CASCADE CONSTRAINTS;
DROP TABLE customer CASCADE CONSTRAINTS;
DROP TABLE orders CASCADE CONSTRAINTS;
DROP TABLE shipping CASCADE CONSTRAINTS;

-- 1. CUSTOMER
CREATE TABLE customer (
    customer_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    first_name VARCHAR2(20),
    last_name VARCHAR2(25),
    email VARCHAR2(30),
    customer_password VARCHAR2(20),
    customer_address VARCHAR2(40),
    phone_number CHAR(12),
    registration_date DATE NOT NULL
);

-- 2. ORDERS
CREATE TABLE orders (
    order_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    order_date DATE NOT NULL,
    customer_id NUMBER,
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) ON DELETE CASCADE
);

-- 3. SHIPPING
CREATE TABLE shipping (
    shipping_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    shipping_type VARCHAR2(10),
    shipping_cost NUMBER(8,2),
    delivery_time VARCHAR2(10),
    tracking_number VARCHAR2(20),
    shipping_address VARCHAR2(100),
    order_id NUMBER,
    CONSTRAINT fk_order FOREIGN KEY (order_id) REFERENCES orders(order_id) ON DELETE CASCADE
);

-- 4. PUBLISHER
CREATE TABLE publisher (
    publisher_id CHAR(2) PRIMARY KEY,
    first_name VARCHAR2(40),
    email VARCHAR2(30),
    phone_number VARCHAR2(12)
);

-- 5. BOOK
CREATE TABLE book (
    book_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR2(25),
    genre VARCHAR2(15),
    price NUMBER(6,2),
    stock NUMBER(4),
    ISBN VARCHAR2(13),
    publication_date DATE NOT NULL
);

-- 6. AUTHOR
CREATE TABLE author (
    author_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    first_name VARCHAR2(20),
    last_name VARCHAR2(25),
    email VARCHAR2(25),
    phone_number CHAR(12),
    book_id NUMBER,
    FOREIGN KEY (book_id) REFERENCES book(book_id) ON DELETE CASCADE
);

-- 7. REVIEWS
CREATE TABLE reviews (
    review_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    book_id NUMBER,
    customer_id NUMBER,
    order_id NUMBER,
    FOREIGN KEY (book_id) REFERENCES book(book_id) ON DELETE CASCADE,
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) ON DELETE CASCADE,
    FOREIGN KEY (order_id) REFERENCES orders(order_id) ON DELETE CASCADE
);

-- Customers
INSERT INTO customer (customer_id, first_name, last_name, email, customer_password, customer_address, phone_number, registration_date) 
VALUES (0, 'Dwight', 'Schrute', 'dwightschrute@hotmail.com', 'beets4dayz', '3092 Dwight Lane', '812-797-3445', TO_DATE('04-10-2016', 'MM-DD-YYYY'));

INSERT INTO customer (customer_id, first_name, last_name, email, customer_password, customer_address, phone_number, registration_date) 
VALUES (1, 'Jim', 'Halpert', 'jimhalpert@gmail.com', 'dumbdwight90', '402 Aroya Drive', '812-797-5688', TO_DATE('07-25-2002', 'MM-DD-YYYY'));

INSERT INTO customer (customer_id, first_name, last_name, email, customer_password, customer_address, phone_number, registration_date) 
VALUES (2, 'Pam', 'Halpert', 'pamhalpert@gmail.com', 'jones87', '402 Aroya Drive', '812-797-1992', TO_DATE('03-14-2012', 'MM-DD-YYYY'));

-- Orders
INSERT INTO orders (order_id, order_date, customer_id) 
VALUES (0, TO_DATE('02-14-2020', 'MM-DD-YYYY'), 1);

INSERT INTO orders (order_id, order_date, customer_id) 
VALUES (1, TO_DATE('03-10-2022', 'MM-DD-YYYY'), 2);

INSERT INTO orders (order_id, order_date, customer_id) 
VALUES (2, TO_DATE('05-23-2019', 'MM-DD-YYYY'), 0);

-- Shipping
INSERT INTO shipping (shipping_id, shipping_type, shipping_cost, delivery_time, tracking_number, shipping_address, order_id) 
VALUES (0, 'Flat', 5.99, '3 Days', '409276', '402 Aroya Drive', 0);

INSERT INTO shipping (shipping_id, shipping_type, shipping_cost, delivery_time, tracking_number, shipping_address, order_id) 
VALUES (1, 'Express', 12.99, '1 Days', '392016', '402 Aroya Drive', 1);

INSERT INTO shipping (shipping_id, shipping_type, shipping_cost, delivery_time, tracking_number, shipping_address, order_id) 
VALUES (2, 'Ground', 4.99, '4 Days', '780432', '3092 Dwight Lane', 2);

-- Publisher
INSERT INTO publisher (publisher_id, first_name, email, phone_number) 
VALUES ('0', 'Penguin Publishing', 'PenguinPublishing@gmail.com', '812-278-2010');

INSERT INTO publisher (publisher_id, first_name, email, phone_number) 
VALUES ('1', 'Dunder Mifflin', 'dundermifflin@gmail.com', '812-278-3489');

INSERT INTO publisher (publisher_id, first_name, email, phone_number) 
VALUES ('2', 'Macmillan Estate', 'macmillanestate@gmail.com', '812-278-2163');

-- Book
INSERT INTO book (book_id, title, genre, price, stock, ISBN, publication_date) 
VALUES (0, 'How to Eat', 'Horror', 15.99, 3, '2456', TO_DATE('04-25-2005', 'MM-DD-YYYY'));

INSERT INTO book (book_id, title, genre, price, stock, ISBN, publication_date) 
VALUES (1, 'SQL For Beginners', 'Informative', 10.99, 10, '345', TO_DATE('08-30-2015', 'MM-DD-YYYY'));

INSERT INTO book (book_id, title, genre, price, stock, ISBN, publication_date) 
VALUES (2, 'Advanced Python', 'Humor', 12.99, 4, '36789', TO_DATE('06-21-1998', 'MM-DD-YYYY'));

-- Author
INSERT INTO author (author_id, first_name, last_name, email, phone_number, book_id) 
VALUES (0, 'Bob', 'Vance', 'bobvance@gmail.com', '812-456-2397', 0);

INSERT INTO author (author_id, first_name, last_name, email, phone_number, book_id) 
VALUES (1, 'Michael', 'Scott', 'michaelscott@gmail.com', '812-241-1845', 2);

-- Reviews
INSERT INTO reviews (review_id, customer_id, book_id, order_id) 
VALUES (0, 0, 1, 2);

INSERT INTO reviews (review_id, customer_id, book_id, order_id) 
VALUES (1, 2, 0, 1);

INSERT INTO reviews (review_id, customer_id, book_id, order_id) 
VALUES (2, 1, 2, 0);
